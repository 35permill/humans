<html>
<head>
  <title>Teleop Trial</title>
    
    <link type="text/css" href="jqueryui/css/sunny/jquery-ui-1.8.10.custom.css" rel="stylesheet" />   
    <script type="text/javascript" src="jqueryui/js/jquery-1.4.4.min.js"></script> 
    <script type="text/javascript" src="jqueryui/js/jquery-ui-1.8.10.custom.min.js"></script> 
    <script type="text/javascript" src="json2.js"></script>
    <script type="text/javascript" src="rosjs2/ros.js"></script>
    <script type="text/javascript" src="ros/ros.js"> </script>

<script type="text/javascript">
function nop(){};
function json(obj){return JSON.stringify(obj);};
function log(message){ document.getElementById('console').innerHTML = message.toString();  };

var pub_part;
var plane = 'xy';
var h_scale=b_scale=rarm_scale=larm_scale=rwrist_scale=lwrist_scale=50;
var bx=by=bz=tz=rgp=lgp=0;
var head = [];
var rarm = [];
var larm = [];
var r_wrist = [];
var l_wrist = [];

$(function(){
	$('#slider').slider({value:50,min:0,max:100,step:1,orientation:'vertical'}); 
	$('#rg_slider').slider({min:0,max:0.09,step:0.001,orientation:'vertical'}); 
	$('#lg_slider').slider({min:0,max:0.09,step:0.001,orientation:'vertical'}); 
	$('#submit_text').click(function(e){speak()});
	$('window').mouseup(function(e){window.bx=0; window.by=0; window.bz=0});
	$('#rg_slider').unbind("slidestop").bind("slidestop", function(event,ui){rgp=$('#rg_slider').slider("value"); pub_gripper('r',rgp)});	
	$('#lg_slider').unbind("slidestop").bind("slidestop", function(event,ui){lgp=$('#lg_slider').slider("value"); pub_gripper('l',lgp)});	
	$('#slelect_plane').change(function(event,ui){window.plane = $('#select_plane').val()});
	$('.cont_sel').click(function(e){$('.cont_sel').fadeTo(1,0.65); $(this).fadeTo(1,1)}); 
});

function init (){
	displayVideo();
	sub_state();
};

function sub_state() {
	node.subscribe('/head_traj_controller_state_throttle',function(msg){
			head[0]=msg.desired.positions[0];
			head[1]=msg.desired.positions[1]; 
			document.getElementById('head_pos_out').innerHTML='Head Position: Left/Right:\ \ ' + Math.round(-head[0]*180/Math.PI) + '\ deg.\ \ Up/Down:' + Math.round(-head[1]*180/Math.PI) + '\ deg.'
			});
	node.subscribe('/r_gripper_controller_state_throttle',function(msg){rgp=msg.process_value;$('#rg_slider').show().slider("option", "value", rgp)});
	node.subscribe('/l_gripper_controller_state_throttle',function(msg){lgp=msg.process_value;$('#lg_slider').show().slider("option", "value", lgp)});
	node.subscribe('/r_cart_state_throttle', function(msg){rarm=[msg.pose.position.x,msg.pose.position.y,msg.pose.position.z,msg.pose.orientation.x,msg.pose.orientation.y,msg.pose.orientation.z,msg.pose.orientation.w]});
	node.subscribe('/l_cart_state_throttle', function(msg){larm=[msg.pose.position.x,msg.pose.position.y,msg.pose.position.z,msg.pose.orientation.x,msg.pose.orientation.y,msg.pose.orientation.z,msg.pose.orientation.w]});
	node.subscribe('/r_wrist_state_throttle', function(msg){r_wrist=[msg.desired.positions[0],msg.desired.positions[1],msg.desired.positions[2]]});
	node.subscribe('/l_wrist_state_throttle', function(msg){l_wrist=[msg.desired.positions[0],msg.desired.positions[1],msg.desired.positions[2]]});
};

function displayVideo() {
	var video0 = new ros.widgets.MJPEGWidget("VIDEO_CANVAS_0",640,480,"http://pr2c1.cc.gatech.edu:8080/?topic=/wide_stereo/right/image_color?width=640?height=480");
	//buttons for selecting camera source
 	$('#l_arm_cam').click(function(e){ 
   	 video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/l_forearm_cam/image_color?width=640?height=480")}); 
  	$('#head_cam').click(function(e){
   	 video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/wide_stereo/right/image_color?width=640?height=480")});
 	$('#r_arm_cam').click(function(e){
    	 video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/r_forearm_cam/image_color?width=640?height=480")});

        //buttons for selecting rectified cameras
        $('#l_arm_cam1').click(function(e){ 
         video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/l_forearm_cam/image_color?width=640?height=480")}); 
        $('#head_cam1').click(function(e){
         video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/camera/rgb/image_color?width=640?height=480")});
        $('#r_arm_cam1').click(function(e){
         video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/r_forearm_cam/image_rect_color?width=640?height=480")});
	$('#anaglyph').click(function(e){
         video0.setsrc("http://pr2c1.cc.gatech.edu:8080/?topic=/stereo_anaglyph?width=640?height=480")});

};

function get_point(event){
	pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById("VIDEO_CANVAS_0").offsetLeft;
	pos_y = event.offsetY?(event.offsetY):event.pageY-document.getElementById("VIDEO_CANVAS_0").offsetTop;
	log([pos_x,pos_y]);
};
/*
function get_snapshot() { 
	node.rosjs.callService('/prosilica/request_image',{''}, log(resp));
};
*/
function pub_Head()  {
		if (head[0] <= -2.70) {head[0] = -2.70} 
		if (head[0] >= 2.70) {head[0] = 2.70}
		if (head[1] <= -0.5) {head[1] = -0.5}
		if (head[1] >= 1.4) {head[1] = 1.4}
    		node.publish('head_traj_controller/command', 'trajectory_msgs/JointTrajectory', json(
                    {   'joint_names':["head_pan_joint", "head_tilt_joint"],
                        'points':[{
                            'positions':head,
                            'velocities':[0.1, 0.1],
                            //'time_from_start':{'nsecs':5,'secs':9},
                        }]} ));
};

function pub_head_goal() {
	node.publish('head_traj_controller/point_head_action/goal', 'pr2_controllers_msgs/PointHeadActionGoal', json(
		{  'goal':{'target':{'header':{'frame_id':"/base_link"},
				     'point':{'x':5, 'y':0, 'z':1.2 }},
			   'pointing_axis':{'x':1, 'pointing_frame':"/wide_stereo_r_stereo_camera_frame"},
			   'max_velocity':0.6}}))
};

function look_at_hand(hand) {
	node.publish('head_traj_controller/point_head_action/goal', 'pr2_controllers_msgs/PointHeadActionGoal', json(
		{  'goal':{'target':{'header':{'frame_id':"/" + hand + "_gripper_tool_frame"},
				     'point':{'x':0.1, 'y':0, 'z':0 }},
			   'pointing_axis':{'x':1},
			   'pointing_frame':'/wide_stereo_link',
			   'max_velocity':0.6 }}))
};

function pub_gripper(arm,grpos) {
	node.publish(arm + '_gripper_controller/gripper_action/goal', 'pr2_controllers_msgs/Pr2GripperCommandActionGoal', json(
		{    'goal':{'command':{'position': grpos ,'max_effort':-1}}}));
};

function pub_arm_pose(arm) {
	if (arm == 'r'){
	node.publish('r_cart/command_pose', 'geometry_msgs/PoseStamped', json(
		{   'header':{'frame_id':"/torso_lift_link"},
		    'pose':{'position':{'x':rarm[0],'y':rarm[1],'z':rarm[2]},
			    'orientation':{'x':rarm[3],'y':rarm[4],'z':rarm[5],'w':rarm[6]}}}))
//	log(rarm);
	} else {
	node.publish('l_cart/command_pose', 'geometry_msgs/PoseStamped', json(
		{   'header':{'frame_id':"/torso_lift_link"},
		    'pose':{'position':{'x':larm[0],'y':larm[1],'z':larm[2]},
			    'orientation':{'x':larm[3],'y':larm[4],'z':larm[5],'w':larm[6]}}}))
//	log(larm);
		}	   // 'orientation':{'x':0.7,'y':0,'z':0.7,'w':0.7}}}))
};

function pub_wrist(arm) {
	if (arm == 'r'){
	node.publish('r_wrist/command', 'trajectory_msgs/JointTrajectory', json(
               {   'joint_names':["r_forearm_roll_joint", "r_wrist_flex_joint", "r_wrist_roll_joint"],
                        'points':[{
                           'positions':r_wrist,
                            'velocities':[0, 0, 0],
                            'time_from_start':{'nsecs':1000000,'secs':0},
                        }]} ));
	//log(r_wrist);
	} else {
	node.publish('l_wrist/command', 'trajectory_msgs/JointTrajectory', json(
	        {   'joint_names':["l_forearm_roll_joint", "l_wrist_flex_joint", "l_wrist_roll_joint"],
                        'points':[{
                            'positions':l_wrist,
                            'velocities':[0, 0, 0],
                            'time_from_start':{'nsecs':1000000,'secs':0},
                        }]} ));
	//log(l_wrist);
	};
};
	
function teleop_arm(arm) {
	var x,y,z,b9txt,b7txt;
	if (plane == 'xy'){x=0; y=1; z=2; b9txt='Up'; b7txt='Down'}
	else if (plane == 'yz') {x=2; y=1; z=0; b9txt='Further Away'; b7txt='Closer'};

	if (arm=='r') {	
		log("Controlling Right Arm");
		$('#slider').unbind("slidestop");
		$('#slider').bind("slidestop", function(event,ui){rarm_scale = $('#slider').slider("value")});
		$('#slider').show().slider("option", "value", rarm_scale);

		$("#tp").unbind();
		$("#tp").click(function(e){
			rarm[y] -= (e.pageX - Math.round(this.width/2) - this.x)/500;
			rarm[x] -= (e.pageY - Math.round(this.height/2) - this.y)/500;
			pub_arm_pose(arm);
		});

		$('.bpd').unbind();
		$('#b9').show().text(b9txt).click(function(e){//arm up vertically
			rarm[z] += rarm_scale/500;
			pub_arm_pose(arm);
		});
		$('#b8').show().text("^").click(function(e){//arm forward horizantally 
			rarm[x] += rarm_scale/500;
			pub_arm_pose(arm)
		});
		$('#b7').show().text(b7txt).click(function(e){//arm down vertically
			rarm[z] -= rarm_scale/500;
			pub_arm_pose(arm);
		});
		$('#b6').show().text(">").click(function(e){ // arm right horizantally 
			rarm[y] -= rarm_scale/500;
			pub_arm_pose(arm)
		});
		$('#b5').hide()
		$('#b4').show().text("<").click(function(e){ //arm left horizantally
			rarm[y] += rarm_scale/500;
			pub_arm_pose(arm)
		});
		$('#b3').hide();
		$('#b2').show().text("v").click(function(e){ //arm backward horizantally
			rarm[x] -= rarm_scale/500;  if (rarm[0] <= 0.1) {rarm[0] = 0.1}
			pub_arm_pose(arm)
		});
		$('#b1').hide();
	} else {
		log("Controlling Left Arm");
		$('#slider').unbind("slidestop");
		$('#slider').bind("slidestop", function(event,ui){larm_scale = $('#slider').slider("value")});
		$('#slider').show().slider("option", "value", larm_scale);
		
		$("#tp").unbind();
		$("#tp").click(function(e){
			larm[y] -= (e.pageX - Math.round(this.width/2) - this.x)/500;
			larm[x] -= (e.pageY - Math.round(this.height/2) - this.y)/500;
			pub_arm_pose(arm);
		});

		$('.bpd').unbind();
		$('#b9').show().text("Up").click(function(e){//arm up vertically
			larm[z] += larm_scale/500;
			pub_arm_pose(arm);
		});
		$('#b8').show().text("^").click(function(e){//arm forward horizantally 
			larm[x] += larm_scale/500;
			pub_arm_pose(arm)
		});
		$('#b7').show().text("Down").click(function(e){//arm down vertically
			larm[z] -= larm_scale/500;
			pub_arm_pose(arm);
		});
		$('#b6').show().text(">").click(function(e){ // arm right horizantally 
			larm[y] -= larm_scale/500;
			pub_arm_pose(arm)
		});
		$('#b5').hide()
		$('#b4').show().text("<").click(function(e){ //arm left horizantally
			larm[y] += larm_scale/500;
			pub_arm_pose(arm)
		});
		$('#b3').hide();
		$('#b2').show().text("v").click(function(e){ //arm backward horizantally
			larm[x] -= larm_scale/500;  if (larm[0] <= 0.1) {larm[0] = 0.1}
			pub_arm_pose(arm)
		});
		$('#b1').hide();
	};
};
function teleop_wrist(arm) {
	if (arm=='r') {	
		log("Controlling Right Hand");
		$('#slider').unbind("slidestop");
		$('#slider').bind("slidestop", function(event,ui){rwrist_scale = $('#slider').slider("value")});
		$('#slider').show().slider("option", "value", rwrist_scale);
		$('.bpd').unbind();
	
		$("#tp").unbind();
		$("#tp").click(function(e){
			r_wrist[0] += (e.pageX - Math.round(this.width/2) - this.x)/100;
			r_wrist[1] -= (e.pageY - Math.round(this.height/2) - this.y)/100;
			pub_wrist(arm)
		});

		$('#b9').show().text("Hand Roll Right").click(function(e){
			r_wrist[2] += rwrist_scale*(Math.PI/100);
			pub_wrist(arm);
		});
		$('#b8').show().text("Wrist Flex Out").click(function(e){
			r_wrist[1] += 0.01*rwrist_scale;  if (r_wrist[1]>0){r_wrist[1]=0};
			pub_wrist(arm)
		});
		$('#b7').show().text("Hand Roll Left").click(function(e){
			r_wrist[2] -= rwrist_scale*(Math.PI/100);
			pub_wrist(arm);
		});
		$('#b6').show().text("Arm Roll Right").click(function(e){
			r_wrist[0] += rwrist_scale*(Math.PI/100);
			pub_wrist(arm)
		});
		$('#b5').hide()
		$('#b4').show().text("Arm Roll Left").click(function(e){
			r_wrist[0] -= rwrist_scale*(Math.PI/100);
			pub_wrist(arm);
		});
		$('#b3').hide()
		$('#b2').show().text("Wrist Flex Left").click(function(e){ //
			r_wrist[1] -= 0.01*rwrist_scale;  if (r_wrist[1]<-2.15){r_wrist[1]=-2.15};
			pub_wrist(arm);
		});
		$('#b1').hide();

		
	} else {
		log("Controlling Left Hand");
		$('#slider').unbind("slidestop");
		$('#slider').bind("slidestop", function(event,ui){lwrist_scale = $('#slider').slider("value")});
		$('#slider').show().slider("option", "value", lwrist_scale);
		$('.bpd').unbind();

		$("#tp").unbind();
		$("#tp").click(function(e){
			l_wrist[0] += (e.pageX - Math.round(this.width/2) - this.x)/100;
			l_wrist[1] -= (e.pageY - Math.round(this.height/2) - this.y)/100;
			pub_wrist(arm);
		});

		$('#b9').show().text("Hand Roll Right").click(function(e){
			l_wrist[2] += lwrist_scale*(Math.PI/100);
			pub_wrist(arm);
		});
		$('#b8').show().text("Wrist Flex Out").click(function(e){
			l_wrist[1] += 0.01*lwrist_scale;  if (l_wrist[1]>0){l_wrist[1]=0};
			pub_wrist(arm)
		});
		$('#b7').show().text("Hand Roll Left").click(function(e){
			l_wrist[2] -= lwrist_scale*(Math.PI/100);
			pub_wrist(arm);
		});
		$('#b6').show().text("Arm Roll Right").click(function(e){
			l_wrist[0] += lwrist_scale*(Math.PI/100); 
			pub_wrist(arm)
		});
		$('#b5').hide()
		$('#b4').show().text("Arm Roll Left").click(function(e){
			l_wrist[0] -= lwrist_scale*(Math.PI/100);
			pub_wrist(arm);
		});
		$('#b3').hide()
		$('#b2').show().text("Wrist Flex In").click(function(e){ //
			l_wrist[1] -= 0.01*lwrist_scale;  if (l_wrist[1]<-2.15){l_wrist[1]=-2.15};
			pub_wrist(arm);
		});
		$('#b1').hide();
	};
};

function pub_spine(tz) {
	node.publish('torso_controller/position_joint_action/goal','pr2_controllers_msgs/SingleJointPositionActionGoal',json(
		{'goal':{'position': this.tz }}))
};

function teleop_head() {
	window.pub_part = window.clearInterval(pub_part);
	log('Controlling Head');
	$('#slider').unbind("slidestop");
	$('#slider').bind("slidestop", function(event,ui){h_scale = $('#slider').slider("value")});
	$('#slider').show().slider("option", "value", h_scale);
	
	$("#tp").unbind();
	$("#tp").click(function(e){
		window.pub_part = window.clearInterval(pub_part);
		head[0] -= (e.pageX - Math.round(this.width/2) - this.x)/200;
		head[1] += (e.pageY - Math.round(this.height/2) - this.y)/200;
		pub_Head();
	});
	
	$('.bpd').unbind();
	$('#b9').hide(); 
	$('#b8').show().text("^").click(function(e){//head up 
		window.pub_part = window.clearInterval(pub_part);
   		head[1] -= h_scale/150;
                pub_Head()
	});
	$('#b7').hide();
	$('#b6').show().text(">").click(function(e){ //head right
		window.pub_part = window.clearInterval(pub_part);
   		head[0] -= h_scale/150;
		pub_Head()
	});
	$('#b5').show().text("o").click(function(e){ //center head to (0,0)
		window.pub_part = window.clearInterval(pub_part);
		head[0] = 0; head[1] = 0;
		pub_head_goal();
	});
	$('#b4').show().text("<").click(function(e){ //head left
		window.pub_part = window.clearInterval(pub_part);
   		head[0] += h_scale/150;
                pub_Head()
	});
	$('#b3').show().text("Track Right Hand").click(function(e){
		window.pub_part = window.clearInterval(pub_part);
		window.pub_part = window.setInterval("look_at_hand('r')",200);
	});	
  	$('#b2').show().text("v").click(function(e){ //head down
		window.pub_part = window.clearInterval(pub_part);
   		head[1] += h_scale/150;
                pub_Head()
	});
	$('#b1').show().text("Track Left Hand").click(function(e){
		window.pub_part = window.clearInterval(pub_part);
		window.pub_part = window.setInterval("look_at_hand('l')",200);
	});
};

function pub_Twist(bx,by,bz) {
          node.publish('/base_controller/command', 'geometry_msgs/Twist', '{"linear":{"x":' + bx + ',"y":' + by + ',"z":0}, "angular":{"x":0,"y":0,"z":' + bz + '}}');
};

function teleop_base() {
	window.pub_part = window.clearInterval(pub_part);
	window.pub_part = setInterval("pub_Twist(window.bx,window.by,window.bz)", 25);
	log("Controlling Base");
	$('#slider').unbind("slidestop");
	$('#slider').bind("slidestop", function(event,ui){b_scale = $('#slider').slider("value")});
	$('#slider').show().slider("option", "value", b_scale);
	
	$("#tp").unbind();
	$("#tp").mousedown(function(e){
		by -= 0.004*(e.pageX - Math.round(this.width/2) - this.x);
		bx -= 0.004*(e.pageY - Math.round(this.height/2) - this.y);
	}).mouseout(function(e){window.bx=0; window.by=0}).mouseup(function(e){window.bx=0; window.by=0});;
	
	$('.bpd').unbind();
	$('#b9').show().text("Spine Up").click(function(e){//torso up  
   		tz += 0.1;	if (tz>=0.55){tz=0.55};
                pub_spine(tz);
	});	
  	$('#b8').show().text("^").mousedown(function(e){// base forward 
		bx = 0.004*b_scale;
		}).mouseout(function(e){window.bx=0}).mouseup(function(e){window.bx=0});
		
	$('#b7').show().text("Spine Down").click(function(e){//torso down  
   		tz -= 0.1;	if (tz<=0){tz=0};
                pub_spine(tz);
	});
	$('#b6').show().text(">").mousedown(function(e){ //base right
   		by = -0.004*b_scale;
		}).mouseout(function(e){window.by=0}).mouseup(function(e){window.by=0});
	
	$('#b5').hide();
	$('#b4').show().text("<").mousedown(function(e){ //base left
   		by = 0.004*b_scale;
		}).mouseout(function(e){window.by=0}).mouseup(function(e){window.by=0});

  	$('#b3').show().text("Turn Right").mousedown(function(e){ //base rot right (cw)
   		bz = -0.01*b_scale;
		}).mouseout(function(e){window.bz=0}).mouseup(function(e){window.bz=0});

	$('#b2').show().text("v").mousedown(function(e){ // base backward
   		bx = -0.004*b_scale;
		}).mouseout(function(e){window.bx=0}).mouseup(function(e){window.bx=0});

   	$('#b1').show().text("Turn Left").mousedown(function(e){ //base rot left (ccw)
   		bz = 0.01*b_scale;
		}).mouseout(function(e){window.bz=0}).mouseup(function(e){window.bz=0});
};

function speak(){ node.publish('/robotsound', 'sound_play/SoundRequest', '{"sound":-3, "command":1, "arg":"' + $("#txt2say").val() + '"}');  };
/*
function standby_power() {
	node.rosjs.callService('/power_board/control2', json(
		 {   'NUMBER_OF_CIRCUITS':3,
                     'BASE':0,
		     'RIGHT_ARM':1,
		     'LEFT_ARM':2,
		     'circuit':0,
                     'command':"stop",
                 }), nop)
};
*/
function halt_motors() {
	node.rosjs.callService('/pr2_etherCAT/halt_motors', json(''), nop);
};

function reset_motors() {
	node.rosjs.callService('/pr2_etherCAT/reset_motors', json(''), nop);
};
/*
function scale(x){
	return (x/Math.abs(x))*Math.pow(1.044,x)+x/4
};
*/
function start(){
    node = new ros.NodeHandle("ws://pr2c1.cc.gatech.edu:9091");
	node.setOnClose(function(e) {
          log("Disconnected or Can't Connect.");
    	});
    	node.setOnError(function(e) {
          log("Unknown error!");
    	});
      	node.setOnOpen(function(e) {   
	  log("Connected to " + node.url + ".");
	  init();
	  });
};
</script>

<style>
.bpd{
text-align:center;
height:70px;
width:70px;} 
.cont_sel{
min-height:40px;
width:100%;}
.vid_sel{
min-height:30px;
width:100%;
}
</style>

</head>
  <body onload="start()">
<table>
  <tr><td colspan='4'>
      <div id="VIDEO_CANVAS_0"></img></div>
      </td> <td rowspan='2'>
  </td></tr>
  <tr>
    <td><button class="vid_sel" id="l_arm_cam" type="button" value="l_forearm_cam" title="Left Forearm Camera">Left Arm Cam Unrect</button></td>
    <td><button class="vid_sel" id="head_cam" type="button" value="wide_stereo/right" title="Head Wideview Camera">Head Cam Unrect</button></td>
    <td><button class="vid_sel" id="r_arm_cam" type="button" value="r_forearm_cam" title="Right Forearm Camera">Right Arm Cam Unrect</button></td>
    <td><button class="vid_sel" id="anaglyph" type="button" value="head_anaglyph" title="Head Cam: Red-Blue Stereo">Head Cam: Red-Blue Stereo</button></td>  
 </tr></tr> 
    <td><button class="vid_sel" id="l_arm_cam1" type="button" value="l_forearm_cam" title="Left Forearm Camera">Left Arm Cam Rect</button></td>
    <td><button class="vid_sel" id="head_cam1" type="button" value="wide_stereo/right" title="Head Wideview Camera">Head Cam Rect</button></td>
    <td><button class="vid_sel" id="r_arm_cam1" type="button" value="r_forearm_cam" title="Right Forearm Camera">Right Arm Cam Rect</button></td>
    <td><button class="vid_sel" id="reset" type="button" style="color:white;background-color:green;font:bold;" onclick="reset_motors();">REACTIVATE</button></td>
  </tr>
</table>
<div id="head_pos_out"></div>
<table><tr><td> <!-- Begin Gross Formatting-->
<div>
  <table>
    <tr><td colspan="2"><button class="cont_sel" id="cont_head" type="button" value="cont_head" onclick="teleop_head()">Control Head</button></td></tr>
    <tr>
       <td><button class="cont_sel" id="cont_l_arm" type="button" value="cont_l_arm" onclick="teleop_arm('l')">Control Left Arm </button></td>
       <td><button class="cont_sel" id="cont_r_arm" type="button" value="cont_r_arm" onclick="teleop_arm('r')">Control Right Arm </button></td>
    </tr>
    <tr>
       <td><button class="cont_sel" id="cont_l_hand" type="button" value="cont_l_hand" onclick="teleop_wrist('l')">Control Left Hand</button></td>
       <td><button class="cont_sel" id="cont_r_hand" type="button" value="cont_r_hand" onclick="teleop_wrist('r')">Control Right Hand </button></td>
    </tr>
    <tr><td colspan="2"><button class="cont_sel" id="cont_base" type="button" value="cont_base" onclick="teleop_base()">Control Base</button></td></tr>
 </table>
</div>
 <!--Speak Button and Text Input -->
        <table><tr>
          <form action=''>
             <td><button id="submit_text" type="button">Speak:</button></td>
             <td><input id="txt2say" type="text" style="width:215px"/></td>
          </form>
        </tr></table>
  <!--End Speak Button + Text -->

</td><td>
  <img id="tp" src=touchpad.jpg title="Click here for 2D Control of the selected robot part" style="border-style:solid; border-width:2px">
</td><td> <!-- Gross Formatting-->

<div> <!--Buttonpad Controls-->
  <table>
    <tr><td rowspan="4">
      <div style="height:215px" id="slider"></div>
    </td></tr>
    <tr>
      <td><button class="bpd" id="b7" type="button" value=1> Down </button></td>
      <td><button class="bpd" id="b8" type="button" value=1> ^ </button></td>
      <td><button class="bpd" id="b9" type="button" value=1> Up </button></td>
    </tr>
    <tr>
      <td><button class="bpd" id="b4" type="button" value="1"><</button></td>
      <td><button class="bpd" id="b5" type="button" value=1> 0 </button></td>
      <td><button class="bpd" id="b6" type="button" value="-1">></button></td>
    </tr>
    <tr>
      <td><button class="bpd" id="b1" type="button" value="-1">Turn Left</button></td>
      <td><button class="bpd" id="b2" type="button" value="-1">v</button></td>
      <td><button class="bpd" id="b3" type="button" value="-1">Turn Right</button></td>
    </tr>
  </table>
</div> <!--END buttonpad controls -->
</td><td> <!-- Gross Formatting-->
  <table border='1'>
    <th colspan='2'> Grippers </th>
    <tr><td>Left</td><td>Right</td></tr>
    <tr>
      <td rowspan="2" align='center'><div style="margin:5px;height:150px" id="lg_slider"></div></td>
      <td rowspan="2" align='center'><div style="margin:5px;height:150px" id="rg_slider"></div></td>
    </tr>
  </table>
</td>
</tr>
<tr><td colspan='2'> <!-- Gross Formating-->
<div id="console"></div>
</td><td colspan='2'> <!-- Gross Formating-->
<!--  <select id="select_plane" onchange="function(e){window.plane=this.value}">
    <option value='xy'>Horizontal</option>
    <option value='yz'>Vertical</option>
  </select>
</td></tr><tr><td colspan='4'>
  <button id="stop" type="button" style="color:red;background-color:gray;font:bold;height:auto;border-style:none;height:30px;width:100%;" onmouseover="halt_motors(); standby_power()">STOP ROBOT! </button> -->
</td></tr></table> <!--END Gross Formating-->
</body>
</html>
